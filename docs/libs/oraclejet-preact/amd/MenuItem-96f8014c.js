define(['exports', 'preact/jsx-runtime', 'preact/hooks', './Text-7cbb9b7a', './classNames-2e65b3b3', './useId-bea76214', './mergeProps-7d608009', './usePress-80afb622', './useUser-e0989b0b', './useComponentTheme-f77b756d', './mergeInterpolations-8339fdb7', './flexitem-c1ba5934', './useInteractionStyle-0d19d1a9', 'preact', 'preact/compat', './clientHints-aa2ccdd3', './useToggle-4d231fba', './UNSAFE_Menu/themes/redwood/MenuItemTheme'], (function(e,n,t,o,r,s,a,u,i,c,l,d,m,p,f,g,b,y){"use strict";const h=e=>e.dataset.ojMenuItemKey,C=e=>{const n=e.closest("[data-oj-menu-item-key]");if(n){const e=h(n);return void 0===e?null:{key:e,elem:n}}return null},M=(e,n)=>{if(!n)return{};return{onKeyDown:t=>{"ltr"===e?"ArrowRight"===t.key&&n?.():"ArrowLeft"===t.key&&n?.()}}},v=p.createContext({isMobile:!1,onClose:()=>null,testId:""});function x(){return t.useContext(v)}const I=p.createContext({menuContainerRef:{current:null},currentKey:void 0,showFocusRing:!1,changeKey:()=>{},isContainerFocused:!1,menuContainerGeneralInformation:{current:{wasMouseMoved:!1,lastMouseLeaveMenuItemdRelatedTarget:null}}});function k(){return t.useContext(I)}const w=f.forwardRef((({id:e,label:s,onAction:p,startIcon:f,endIcon:g,role:h,isChecked:C,isDisabled:v=!1,variant:I="standard",type:w,hoverInfo:S,openSubmenu:T,menuItemLabelWeight:j="normal",isSubmenuOpen:P,submenuId:R,submenuRef:F},L)=>{const{onClose:E}=x(),{currentKey:A,changeKey:D,showFocusRing:K,menuContainerRef:N,menuContainerGeneralInformation:U,isContainerFocused:O}=k(),q=t.useRef(null),{direction:B}=i.useUser(),G=A===e,H=t.useCallback((e=>{"submenu"!==w&&E?.({reason:"itemAction"}),p?.(e)}),[w,E,p]),{hoverProps:V}=function(e){const{bool:n,setTrue:t,setFalse:o}=b.useToggle(!1);return{hoverProps:{ontouchend:t,onMouseEnter:t=>{n?o():e.onMouseEnter(t)},onMouseLeave:n=>{e.onMouseLeave(n)}}}}({onMouseEnter:n=>{S?.hoverStatus.current.recentClose||S?.hoverStatus.current.pendingUnhover||(S&&U.current.wasMouseMoved&&(S.hoverStatus.current.pendingUnhover=!0),U.current.wasMouseMoved&&(S?.hoverProps.onMouseEnter(n),D({key:e,reason:"mouseEnter"})))},onMouseLeave:e=>{S&&(S.hoverStatus.current.pendingUnhover=!1),(N.current?.contains(e.relatedTarget)||F?.current?.contains(e.relatedTarget))&&(U.current.lastMouseLeaveMenuItemdRelatedTarget=e.relatedTarget)}}),{pressProps:z}=u.usePress(H,{isDisabled:v});t.useLayoutEffect((()=>{G&&q.current?.focus()}),[G]);const{interactionProps:W}=m.useInteractionStyle(v),{classes:$,styles:{iconLabelContainer:_,iconContainer:J,startIconContainer:Q,labelContainer:X,endIconContainer:Y}}=c.useComponentTheme(y.MenuItemRedwoodTheme,{current:G?"isCurrent":"notCurrent",focusRing:K?"isFocusRing":"notFocusRing",variant:v?"disabled":I,containerFocused:O?"isContainerFocused":"notContainerFocused",submenuOpen:P?"isSubmenuOpen":"notSubmenuOpen"}),Z=l.mergeInterpolations([...Object.values(d.flexitemInterpolations)]),{class:ee,...ne}=Z({flex:"1 1 auto",alignSelf:"center"}),{class:te,...oe}=Z({flex:"0 0 auto",alignSelf:"center"}),re=r.classNames([te,_,J,Q]),se=r.classNames([ee,_,X]),ae=r.classNames([te,_,J,Y]);return n.jsx("div",{role:"presentation",...void 0!==R&&"submenu"===w&&{"aria-owns":R},children:n.jsxs("a",{ref:e=>{q.current=e,"function"==typeof L?L(e):L&&(L.current=e)},class:$,...a.mergeProps(W,V,z,M(B,T),(ue=e,ie=D,{onClick:()=>{ie({key:ue,reason:"click"})}})),role:h,"data-oj-menu-item-key":e,..."submenu"===w&&{"aria-haspopup":!0,"aria-expanded":!!P},...v&&{"aria-disabled":!0},..."select"===w&&{"aria-checked":!!C},tabIndex:G?0:-1,children:[f&&n.jsx("span",{style:oe,class:re,children:f}),n.jsx("span",{style:ne,class:se,children:n.jsx(o.Text,{variant:"inherit",size:"md",weight:j,children:s})}),g&&n.jsx("span",{style:oe,class:ae,children:g})]})});var ue,ie}));e.BaseMenuItem=w,e.MenuContainerContext=I,e.MenuContext=v,e.MenuItem=function(e){const o=s.useId(),r=t.useMemo((()=>`oj-menu-item-${o}`),[o]);return n.jsx(w,{...e,role:"menuitem",type:"simple",id:r})},e.getCloseSubmenuEvent=(e,n)=>{if(!n)return{};return{onKeyDown:t=>{("Escape"===t.key||"ltr"===e&&"ArrowLeft"===t.key||"rtl"===e&&"ArrowRight"===t.key)&&(t.stopPropagation(),n?.())}}},e.getIsMobile=()=>{const{deviceType:e}=g.getClientHints();return"phone"===e},e.getKeyboardCloseProps=(e,n)=>({onKeyDown:t=>{"Tab"===t.key?(t.stopPropagation(),e?.({reason:"dismissed"}),t.preventDefault()):"Escape"===t.key&&"main"===n&&(t.stopPropagation(),e?.({reason:"dismissed"}))}}),e.getLastVisible=e=>{if(e){const n=e.querySelectorAll("[data-oj-menu-item-key]"),t=n[n.length-1];if(t){const e=h(t);if(e)return e}}return null},e.getMenuContainerFocusMethods=(e,n)=>({onBlur:()=>{setTimeout((()=>{e()}),100)},onFocus:()=>{n()}}),e.getMenuContainerMouseLeave=e=>({onMouseLeave:n=>{e(n)}}),e.getMenuPointerDown=()=>({onPointerDown:e=>{const n=C(e.target);n?.key||e.preventDefault()}}),e.getNVisible=(e,n)=>{if(e){const t=e.querySelectorAll("[data-oj-menu-item-key]")[n];if(t){const e=h(t);if(e)return e}}return null},e.getPrevNext=(e,n,t)=>()=>{if(e){const o=Array.from(e.querySelectorAll("[data-oj-menu-item-key]"));let r=o.findIndex((e=>h(e)===t))+(n?-1:1);const s=o.length-1;r<0&&(r=s),r>s&&(r=0);const a=h(o[r]);return a||null}return null},e.keyElemExtractor=C,e.useMenuContainerContext=k,e.useMenuContext=x}));
//# sourceMappingURL=MenuItem-96f8014c.js.map
